---
title: "Assembling a data set using datetime"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{datetime}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Load puzzle
```{r setup}
library(puzzle)
```

## Puzzle input
```{r, warning=F, message=T, error=F, results='asis', echo=T}
nm = list(pk = list(pk=as.data.frame(puzzle::df_pk_datetime)),
          dose=as.data.frame(puzzle::df_dose_datetime))
```

## Puzzle code
```{r, warning=F, message=T, error=F, results='hide', echo=T}
puzzle(directory=file.path(getwd()),
       order=c(1),
       pk=list(data=nm$pk), 
       dose=list(data=nm$dose), 
       datetimeformat="%Y-%m-%d %H:%M")
```

## Puzzle output
```{r, warning=F, message=F, error=F, results='asis', echo=FALSE}
library(tidyverse)
df = puzzle(directory=file.path(getwd()),
       order=c(1),
       pk=list(data=nm$pk), 
       dose=list(data=nm$dose), 
       datetimeformat="%Y-%m-%d %H:%M") %>% 
  dplyr::mutate_if(is.numeric, round, digits=1)
df %>%
  knitr::kable() %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

